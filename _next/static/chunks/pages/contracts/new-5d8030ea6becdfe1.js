(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[330],{430:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/contracts/new",function(){return r(3330)}])},1051:function(e,n,r){"use strict";r.d(n,{$_:function(){return m}});var t=r(5893),l=r(4184),a=r.n(l),s=r(7536);function i(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function c(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){i(e,n,r[n])}))}return e}function o(e,n){if(null==e)return{};var r,t,l=function(e,n){if(null==e)return{};var r,t,l={},a=Object.keys(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||(l[r]=e[r]);return l}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function d(e,n){return function(r){var l=r.hint,i=r.name,d=r.label,u=r.inputId,m=r.className,b=r.wrapInput,h=r.registerOptions,x=r.showOptionalLabel,p=o(r,["hint","name","label","inputId","className","wrapInput","registerOptions","showOptionalLabel"]),j=(0,s.Gc)(),v=j.register,g=(0,j.getFieldState)(i).error,N=c({className:a()("input-bordered",n,{"input-error":!!g})},v(i,h),p),w=e(N);return(0,t.jsxs)("div",{className:a()("form-control",m),children:[(0,t.jsxs)("label",{htmlFor:u,className:"label",children:[d?(0,t.jsx)("span",{className:"label-text",children:d}):null,x?(0,t.jsx)("span",{className:"label-text",children:"(Optional)"}):null]}),b?(0,t.jsx)("label",{htmlFor:u,className:"input-group",children:b(w)}):w,g?(0,t.jsx)("label",{htmlFor:u,className:"label",children:(0,t.jsx)("span",{className:"label-text text-red-500",children:f(g)})}):l?(0,t.jsx)("label",{htmlFor:u,className:"label",children:(0,t.jsx)("span",{className:"label-text text-base-content text-xs",children:l})}):null]})}}var u=d((function(e){return(0,t.jsx)("input",c({},e))}),"input"),m=d((function(e){return(0,t.jsx)("textarea",c({},e))}),"textarea");function f(e){return e.message?e.message:e.message||"Invalid input"}n.ZP=u},9321:function(e,n,r){"use strict";r.d(n,{Di:function(){return a},Ph:function(){return l},iK:function(){return t}});var t="".concat("/legalit","/legalit-logo.jpg"),l="contracts-2",a="lendables-2"},5406:function(e,n,r){"use strict";r.d(n,{E:function(){return i}});var t=r(5893),l=(r(7294),r(7649)),a=r(1850),s=function(e){var n=e.children;return(0,t.jsx)(a.Kl,{children:(0,t.jsx)(l.b,{children:n})})};function i(e){return(0,t.jsx)(s,{children:e})}},3330:function(e,n,r){"use strict";r.r(n),r.d(n,{NewTagPage:function(){return O}});var t=r(4051),l=r.n(t),a=r(5893),s=r(1051),i=r(9321),c=r(1850),o=r(9110),d=r(5406),u=r(4184),m=r.n(u),f=r(5321),b=r(1664),h=r.n(b),x=r(1163),p=r(7536),j=r(6280),v=r.n(j);function g(e,n,r,t,l,a,s){try{var i=e[a](s),c=i.value}catch(o){return void r(o)}i.done?n(c):Promise.resolve(c).then(t,l)}function N(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function w(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){N(e,n,r[n])}))}return e}function y(e,n){if(null==e)return{};var r,t,l=function(e,n){if(null==e)return{};var r,t,l={},a=Object.keys(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||(l[r]=e[r]);return l}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}var O=function(){var e=(0,o.CU)(),n=(0,x.useRouter)(),r=(0,p.cI)({mode:"all"}),t=(0,c.pf)().user,d=(0,o.Lu)(i.Di),u=r.control,b=r.handleSubmit,j=r.formState.isSubmitting,N=(0,p.Dq)({control:u,name:"lendables"}),O=N.fields,k=N.append,P=(N.remove,(d.data||[]).filter((function(e){return!O.some((function(n){return n.lendable.id===e.id}))})));return(0,a.jsxs)("div",{className:"w-full max-w-3xl m-auto",children:[(0,a.jsx)("div",{className:"prose dark:prose-invert",children:(0,a.jsx)("h1",{children:"New Contract"})}),(0,a.jsx)(p.RV,w({},r,{children:(0,a.jsxs)("form",{onSubmit:b(function(){var r,a=(r=l().mark((function r(a){var s,c,o;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=a.lendables,c=y(a,["lendables"]),r.next=3,(0,f.ET)((0,f.hJ)(e,i.Ph),w({},c,{userId:t.uid,lendables:s.map((function(e){var n=e.lendable;return{ipChainId:n.id,blockchainAddress:n.id}}))}));case 3:o=r.sent,n.push("/contracts/".concat(o.id));case 5:case"end":return r.stop()}}),r)})),function(){var e=this,n=arguments;return new Promise((function(t,l){var a=r.apply(e,n);function s(e){g(a,t,l,s,i,"next",e)}function i(e){g(a,t,l,s,i,"throw",e)}s(void 0)}))});return function(e){return a.apply(this,arguments)}}()),children:[(0,a.jsxs)("section",{className:"mt-8 p-8 border border-primary rounded-lg",children:[(0,a.jsx)(s.ZP,{name:"name",label:"Name",className:"max-w-sm",registerOptions:{required:{value:!0,message:"A name must be provided"}}}),(0,a.jsx)(s.$_,{name:"description",label:"Description",className:"mt-4",registerOptions:{required:{value:!0,message:"A description of the content is required"}}}),(0,a.jsx)("div",{className:"divider"}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("h3",{className:"text-lg mb-4",children:"Lendables used"}),(0,a.jsx)("p",{className:"text-sm text-slate-700",children:"Give back to the creators that made this work possible"}),O.map((function(e,n){return(0,a.jsx)("div",{className:"mt-4 form-control",children:(0,a.jsx)("a",{href:"/lendables/".concat(e.lendable.id),target:"_blank",rel:"noreferrer",className:"link",children:e.lendable.name})},e.id)})),(0,a.jsxs)("div",{className:"flex flex-row justify-end",children:[(0,a.jsxs)("label",{htmlFor:"new-derivation-modal",className:"mt-4 btn btn-ghost modal-button",children:[(0,a.jsx)("span",{className:"material-icons",children:"add_circle_outline"}),"\xa0 Add Lendable"]}),(0,a.jsx)("input",{type:"checkbox",id:"new-derivation-modal",className:"modal-toggle"}),(0,a.jsx)("label",{htmlFor:"new-derivation-modal",className:"modal cursor-pointer",children:(0,a.jsxs)("label",{htmlFor:"",className:"modal-box relative",children:[(0,a.jsx)("label",{htmlFor:"new-derivation-modal",className:"btn btn-sm btn-circle absolute right-2 top-2",children:"\u2715"}),(0,a.jsx)("h3",{className:"font-bold text-lg",children:"Choose from options"}),(0,a.jsx)("ul",{className:"flex-1 overflow-y-auto",children:P.map((function(e){return(0,a.jsxs)("li",{className:"mt-4 card card-side bg-slate-100",children:[(0,a.jsx)("figure",{className:"w-32 bg-slate-300 overflow-hidden flex-shrink-0",children:(0,a.jsx)("img",{src:e.marketplaceImageUrl||i.iK,alt:"Preview of ".concat(e.name)})}),(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"card-title",children:(0,a.jsx)("a",{href:"/lendables/".concat(e.id),target:"_blank",rel:"noreferrer nofollow",className:"link link-secondary",children:e.name})}),e.description?(0,a.jsx)("p",{className:v()["long-text-preview"],children:e.description}):null]}),(0,a.jsx)("div",{className:"card-actions justify-end",children:(0,a.jsx)("label",{htmlFor:"new-derivation-modal",className:"btn btn-primary btn-sm",onClick:function(){return k({lendable:e})},children:"Use"})})]})]},e.id)}))})]})})]})]}),(0,a.jsx)("div",{className:"divider"}),(0,a.jsx)("h3",{className:"font-bold text-lg",children:"Total cost"}),(0,a.jsx)("div",{className:"flex flex-row justify-end",children:(0,a.jsxs)("span",{children:["1000 ",(0,a.jsx)("span",{className:"kbd kbd-xs",children:"TINYBAR"})]})})]}),(0,a.jsxs)("div",{className:"mt-8 flex flex-row justify-end",children:[(0,a.jsx)(h(),{href:"/dashboard",children:(0,a.jsx)("a",{className:"btn btn-ghost",children:"Back to dashboard"})}),(0,a.jsx)("button",{className:m()("ml-4 btn btn-primary",{loading:j}),children:"Create contract"})]})]})}))]})};O.applyLayout=d.E,n.default=O},6280:function(e){e.exports={"long-text-preview":"utils_long-text-preview__7r2K1"}}},function(e){e.O(0,[536,774,888,179],(function(){return n=430,e(e.s=n);var n}));var n=e.O();_N_E=n}]);